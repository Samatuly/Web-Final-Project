import { Pipe } from '@angular/core';
import { isVowel } from '../helpers/helpers';
import * as i0 from "@angular/core";
/**
 * Takes a singular entity string and pluralizes it.
 * Uses both naive and holdout-list approaches.
 * If several words appear in the string, only the last word is pluralized -- this
 * means that if "your story" was passed in, "your stories" would be passed out.
 *
 * @param {string} singularEntity - Entity to pluralize. Pass as a singular ('story' or 'house').
 *          NOTE: The last word is examined. So you can pass in e.g. 'my story'.
 * @param {number} [quantity=0] quantity - How many of the entity are there? If left blank, this will
 *          pluralize the string (e.g. 'story' -> 'stories', 'house' -> 'houses'). If given a value,
 *          this will pluralize appropriately (e.g. ('story', 1) -> 'story', ('story', 2) -> 'stories').
 */
export class MakePluralStringPipe {
    constructor() {
        this.irregularMap = {
            addendum: 'addenda',
            alga: 'algae',
            alumna: 'alumnae',
            alumnus: 'alumni',
            analysis: 'analyses',
            antenna: 'antennae',
            appendix: 'appendices',
            aquarium: 'aquaria',
            arch: 'arches',
            axe: 'axes',
            axis: 'axes',
            bacillus: 'bacilli',
            bacterium: 'bacteria',
            basis: 'bases',
            batch: 'batches',
            beach: 'beaches',
            beau: 'beaux',
            bison: 'bison',
            brush: 'brushes',
            buffalo: 'buffaloes',
            bureau: 'bureaus',
            bus: 'busses',
            cactus: 'cacti',
            calf: 'calves',
            chateau: 'chateaux',
            cherry: 'cherries',
            child: 'children',
            church: 'churches',
            circus: 'circuses',
            cod: 'cod',
            corps: 'corps',
            corpus: 'corpora',
            crisis: 'crises',
            criterion: 'criteria',
            curriculum: 'curricula',
            datum: 'data',
            deer: 'deer',
            diagnosis: 'diagnoses',
            die: 'dice',
            domino: 'dominoes',
            dwarf: 'dwarves',
            echo: 'echoes',
            elf: 'elves',
            ellipsis: 'ellipses',
            embargo: 'embargoes',
            emphasis: 'emphases',
            erratum: 'errata',
            fax: 'faxes',
            fireman: 'firemen',
            fish: 'fish',
            flush: 'flushes',
            focus: 'foci',
            foot: 'feet',
            formula: 'formulas',
            fungus: 'fungi',
            genus: 'genera',
            goose: 'geese',
            grafito: 'grafiti',
            half: 'halves',
            hero: 'heroes',
            hoax: 'hoaxes',
            hoof: 'hooves',
            hypothesis: 'hypotheses',
            index: 'indices',
            kiss: 'kisses',
            knife: 'knives',
            leaf: 'leaves',
            life: 'lives',
            loaf: 'loaves',
            louse: 'lice',
            man: 'men',
            mango: 'mangoes',
            matrix: 'matrices',
            means: 'means',
            medium: 'media',
            memorandum: 'memoranda',
            millennium: 'milennia',
            moose: 'moose',
            mosquito: 'mosquitoes',
            motto: 'mottoes',
            mouse: 'mice',
            nebula: 'nebulae',
            neurosis: 'neuroses',
            nucleus: 'nuclei',
            oasis: 'oases',
            octopus: 'octopodes',
            ovum: 'ova',
            ox: 'oxen',
            paralysis: 'paralyses',
            parenthesis: 'parentheses',
            person: 'people',
            phenomenon: 'phenomena',
            plateau: 'plateaux',
            potato: 'potatoes',
            quiz: 'quizzes',
            radius: 'radii',
            reflex: 'reflexes',
            'runner-up': 'runners-up',
            scampo: 'scampi',
            scarf: 'scarves',
            scissors: 'scissors',
            scratch: 'scratches',
            self: 'selves',
            series: 'series',
            sheaf: 'sheaves',
            sheep: 'sheep',
            shelf: 'shelves',
            'son-in-law': 'sons-in-law',
            species: 'species',
            splash: 'splashes',
            stimulus: 'stimuli',
            stitch: 'stitches',
            stratum: 'strata',
            syllabus: 'syllabi',
            symposium: 'symposia',
            synopsis: 'synopses',
            synthesis: 'syntheses',
            tableau: 'tableaux',
            tax: 'taxes',
            that: 'those',
            thesis: 'theses',
            thief: 'thieves',
            this: 'these',
            tomato: 'tomatoes',
            tooth: 'teeth',
            tornado: 'tornadoes',
            torpedo: 'torpedoes',
            vertebra: 'vertebrae',
            veto: 'vetoes',
            vita: 'vitae',
            volcano: 'volcanoes',
            waltz: 'waltzes',
            wash: 'washes',
            watch: 'watches',
            wharf: 'wharves',
            wife: 'wives',
            wolf: 'wolves',
            woman: 'women',
            zero: 'zeroes',
        };
    }
    transform(singularEntity, quantity = 0) {
        if (!singularEntity || singularEntity === '') {
            return '';
        }
        if (quantity === 1) {
            return singularEntity;
        }
        else {
            const lastWord = singularEntity.trim().split(' ')[singularEntity.trim().split(' ').length - 1];
            if (this.irregularMap[lastWord.toLocaleLowerCase()]) {
                if (lastWord[0] === lastWord[0].toLocaleUpperCase()) {
                    return singularEntity.replace(lastWord, this.irregularMap[lastWord.toLocaleLowerCase()].replace(this.irregularMap[lastWord.toLocaleLowerCase()][0], this.irregularMap[lastWord.toLocaleLowerCase()][0].toLocaleUpperCase()));
                }
                return singularEntity.replace(lastWord, this.irregularMap[lastWord.toLocaleLowerCase()]);
            }
            else if (lastWord[lastWord.length - 1] === 'y') {
                // Naive approach:
                // consonant+y = word - 'y' +'ies'
                // vowel+y = word + 's'
                return isVowel(lastWord[lastWord.length - 2])
                    ? singularEntity + 's'
                    : singularEntity.replace(lastWord, lastWord.slice(0, -1) + 'ies');
            }
            else if (lastWord[lastWord.length - 1] === 's') {
                return singularEntity + 'es';
            }
            else {
                return singularEntity + 's';
            }
        }
    }
}
MakePluralStringPipe.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "14.2.12", ngImport: i0, type: MakePluralStringPipe, deps: [], target: i0.ɵɵFactoryTarget.Pipe });
MakePluralStringPipe.ɵpipe = i0.ɵɵngDeclarePipe({ minVersion: "14.0.0", version: "14.2.12", ngImport: i0, type: MakePluralStringPipe, name: "makePluralString" });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "14.2.12", ngImport: i0, type: MakePluralStringPipe, decorators: [{
            type: Pipe,
            args: [{
                    name: 'makePluralString',
                }]
        }] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGx1cmFsaXplLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vc3JjL25nLXBpcGVzL3BpcGVzL3N0cmluZy9wbHVyYWxpemUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLElBQUksRUFBaUIsTUFBTSxlQUFlLENBQUM7QUFDcEQsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLG9CQUFvQixDQUFDOztBQU03Qzs7Ozs7Ozs7Ozs7R0FXRztBQUNILE1BQU0sT0FBTyxvQkFBb0I7SUFoQmpDO1FBaUJVLGlCQUFZLEdBQVE7WUFDMUIsUUFBUSxFQUFFLFNBQVM7WUFDbkIsSUFBSSxFQUFFLE9BQU87WUFDYixNQUFNLEVBQUUsU0FBUztZQUNqQixPQUFPLEVBQUUsUUFBUTtZQUNqQixRQUFRLEVBQUUsVUFBVTtZQUNwQixPQUFPLEVBQUUsVUFBVTtZQUNuQixRQUFRLEVBQUUsWUFBWTtZQUN0QixRQUFRLEVBQUUsU0FBUztZQUNuQixJQUFJLEVBQUUsUUFBUTtZQUNkLEdBQUcsRUFBRSxNQUFNO1lBQ1gsSUFBSSxFQUFFLE1BQU07WUFDWixRQUFRLEVBQUUsU0FBUztZQUNuQixTQUFTLEVBQUUsVUFBVTtZQUNyQixLQUFLLEVBQUUsT0FBTztZQUNkLEtBQUssRUFBRSxTQUFTO1lBQ2hCLEtBQUssRUFBRSxTQUFTO1lBQ2hCLElBQUksRUFBRSxPQUFPO1lBQ2IsS0FBSyxFQUFFLE9BQU87WUFDZCxLQUFLLEVBQUUsU0FBUztZQUNoQixPQUFPLEVBQUUsV0FBVztZQUNwQixNQUFNLEVBQUUsU0FBUztZQUNqQixHQUFHLEVBQUUsUUFBUTtZQUNiLE1BQU0sRUFBRSxPQUFPO1lBQ2YsSUFBSSxFQUFFLFFBQVE7WUFDZCxPQUFPLEVBQUUsVUFBVTtZQUNuQixNQUFNLEVBQUUsVUFBVTtZQUNsQixLQUFLLEVBQUUsVUFBVTtZQUNqQixNQUFNLEVBQUUsVUFBVTtZQUNsQixNQUFNLEVBQUUsVUFBVTtZQUNs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OztrSEFsTFUsb0JBQW9CO2dIQUFwQixvQkFBb0I7NEZBQXBCLG9CQUFvQjtrQkFoQmhDLElBQUk7bUJBQUM7b0JBQ0osSUFBSSxFQUFFLGtCQUFrQjtpQkFDekIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQaXBlLCBQaXBlVHJhbnNmb3JtIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBpc1Zvd2VsIH0gZnJvbSAnLi4vaGVscGVycy9oZWxwZXJzJztcblxuQFBpcGUoe1xuICBuYW1lOiAnbWFrZVBsdXJhbFN0cmluZycsXG59KVxuXG4vKipcbiAqIFRha2VzIGEgc2luZ3VsYXIgZW50aXR5IHN0cmluZyBhbmQgcGx1cmFsaXplcyBpdC5cbiAqIFVzZXMgYm90aCBuYWl2ZSBhbmQgaG9sZG91dC1saXN0IGFwcHJvYWNoZXMuXG4gKiBJZiBzZXZlcmFsIHdvcmRzIGFwcGVhciBpbiB0aGUgc3RyaW5nLCBvbmx5IHRoZSBsYXN0IHdvcmQgaXMgcGx1cmFsaXplZCAtLSB0aGlzXG4gKiBtZWFucyB0aGF0IGlmIFwieW91ciBzdG9yeVwiIHdhcyBwYXNzZWQgaW4sIFwieW91ciBzdG9yaWVzXCIgd291bGQgYmUgcGFzc2VkIG91dC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gc2luZ3VsYXJFbnRpdHkgLSBFbnRpdHkgdG8gcGx1cmFsaXplLiBQYXNzIGFzIGEgc2luZ3VsYXIgKCdzdG9yeScgb3IgJ2hvdXNlJykuXG4gKiAgICAgICAgICBOT1RFOiBUaGUgbGFzdCB3b3JkIGlzIGV4YW1pbmVkLiBTbyB5b3UgY2FuIHBhc3MgaW4gZS5nLiAnbXkgc3RvcnknLlxuICogQHBhcmFtIHtudW1iZXJ9IFtxdWFudGl0eT0wXSBxdWFudGl0eSAtIEhvdyBtYW55IG9mIHRoZSBlbnRpdHkgYXJlIHRoZXJlPyBJZiBsZWZ0IGJsYW5rLCB0aGlzIHdpbGxcbiAqICAgICAgICAgIHBsdXJhbGl6ZSB0aGUgc3RyaW5nIChlLmcuICdzdG9yeScgLT4gJ3N0b3JpZXMnLCAnaG91c2UnIC0+ICdob3VzZXMnKS4gSWYgZ2l2ZW4gYSB2YWx1ZSxcbiAqICAgICAgICAgIHRoaXMgd2lsbCBwbHVyYWxpemUgYXBwcm9wcmlhdGVseSAoZS5nLiAoJ3N0b3J5JywgMSkgLT4gJ3N0b3J5JywgKCdzdG9yeScsIDIpIC0+ICdzdG9yaWVzJykuXG4gKi9cbmV4cG9ydCBjbGFzcyBNYWtlUGx1cmFsU3RyaW5nUGlwZSBpbXBsZW1lbnRzIFBpcGVUcmFuc2Zvcm0ge1xuICBwcml2YXRlIGlycmVndWxhck1hcDogYW55ID0ge1xuICAgIGFkZGVuZHVtOiAnYWRkZW5kYScsXG4gICAgYWxnYTogJ2FsZ2FlJyxcbiAgICBhbHVtbmE6ICdhbHVtbmFlJyxcbiAgICBhbHVtbnVzOiAnYWx1bW5pJyxcbiAgICBhbmFseXNpczogJ2FuYWx5c2VzJyxcbiAgICBhbnRlbm5hOiAnYW50ZW5uYWUnLFxuICAgIGFwcGVuZGl4OiAnYXBwZW5kaWNlcycsXG4gICAgYXF1YXJpdW06ICdhcXVhcmlhJyxcbiAgICBhcmNoOiAnYXJjaGVzJyxcbiAgICBheGU6ICdheGVzJyxcbiAgICBheGlzOiAnYXhlcycsXG4gICAgYmFjaWxsdXM6ICdiYWNpbGxpJyxcbiAgICBiYWN0ZXJpdW06ICdiYWN0ZXJpYScsXG4gICAgYmFzaXM6ICdiYXNlcycsXG4gICAgYmF0Y2g6ICdiYXRjaGVzJyxcbiAgICBiZWFjaDogJ2JlYWNoZXMnLFxuICAgIGJlYXU6ICdiZWF1eCcsXG4gICAgYmlzb246ICdiaXNvbicsXG4gICAgYnJ1c2g6ICdicnVzaGVzJyxcbiAgICBidWZmYWxvOiAnYnVmZmFsb2VzJyxcbiAgICBidXJlYXU6ICdidXJlYXVzJyxcbiAgICBidXM6ICdidXNzZXMnLFxuICAgIGNhY3R1czogJ2NhY3RpJyxcbiAgICBjYWxmOiAnY2FsdmVzJyxcbiAgICBjaGF0ZWF1OiAnY2hhdGVhdXgnLFxuICAgIGNoZXJyeTogJ2NoZXJyaWVzJyxcbiAgICBjaGlsZDogJ2NoaWxkcmVuJyxcbiAgICBjaHVyY2g6ICdjaHVyY2hlcycsXG4gICAgY2lyY3VzOiAnY2lyY3VzZXMnLFxuICAgIGNvZDogJ2NvZCcsXG4gICAgY29ycHM6ICdjb3JwcycsXG4gICAgY29ycHVzOiAnY29ycG9yYScsXG4gICAgY3Jpc2lzOiAnY3Jpc2VzJyxcbiAgICBjcml0ZXJpb246ICdjcml0ZXJpYScsXG4gICAgY3VycmljdWx1bTogJ2N1cnJpY3VsYScsXG4gICAgZGF0dW06ICdkYXRhJyxcbiAgICBkZWVyOiAnZGVlcicsXG4gICAgZGlhZ25vc2lzOiAnZGlhZ25vc2VzJyxcbiAgICBkaWU6ICdkaWNlJyxcbiAgICBkb21pbm86ICdkb21pbm9lcycsXG4gICAgZHdhcmY6ICdkd2FydmVzJyxcbiAgICBlY2hvOiAnZWNob2VzJyxcbiAgICBlbGY6ICdlbHZlcycsXG4gICAgZWxsaXBzaXM6ICdlbGxpcHNlcycsXG4gICAgZW1iYXJnbzogJ2VtYmFyZ29lcycsXG4gICAgZW1waGFzaXM6ICdlbXBoYXNlcycsXG4gICAgZXJyYXR1bTogJ2VycmF0YScsXG4gICAgZmF4OiAnZmF4ZXMnLFxuICAgIGZpcmVtYW46ICdmaXJlbWVuJyxcbiAgICBmaXNoOiAnZmlzaCcsXG4gICAgZmx1c2g6ICdmbHVzaGVzJyxcbiAgICBmb2N1czogJ2ZvY2knLFxuICAgIGZvb3Q6ICdmZWV0JyxcbiAgICBmb3JtdWxhOiAnZm9ybXVsYXMnLFxuICAgIGZ1bmd1czogJ2Z1bmdpJyxcbiAgICBnZW51czogJ2dlbmVyYScsXG4gICAgZ29vc2U6ICdnZWVzZScsXG4gICAgZ3JhZml0bzogJ2dyYWZpdGknLFxuICAgIGhhbGY6ICdoYWx2ZXMnLFxuICAgIGhlcm86ICdoZXJvZXMnLFxuICAgIGhvYXg6ICdob2F4ZXMnLFxuICAgIGhvb2Y6ICdob292ZXMnLFxuICAgIGh5cG90aGVzaXM6ICdoeXBvdGhlc2VzJyxcbiAgICBpbmRleDogJ2luZGljZXMnLFxuICAgIGtpc3M6ICdraXNzZXMnLFxuICAgIGtuaWZlOiAna25pdmVzJyxcbiAgICBsZWFmOiAnbGVhdmVzJyxcbiAgICBsaWZlOiAnbGl2ZXMnLFxuICAgIGxvYWY6ICdsb2F2ZXMnLFxuICAgIGxvdXNlOiAnbGljZScsXG4gICAgbWFuOiAnbWVuJyxcbiAgICBtYW5nbzogJ21hbmdvZXMnLFxuICAgIG1hdHJpeDogJ21hdHJpY2VzJyxcbiAgICBtZWFuczogJ21lYW5zJyxcbiAgICBtZWRpdW06ICdtZWRpYScsXG4gICAgbWVtb3JhbmR1bTogJ21lbW9yYW5kYScsXG4gICAgbWlsbGVubml1bTogJ21pbGVubmlhJyxcbiAgICBtb29zZTogJ21vb3NlJyxcbiAgICBtb3NxdWl0bzogJ21vc3F1aXRvZXMnLFxuICAgIG1vdHRvOiAnbW90dG9lcycsXG4gICAgbW91c2U6ICdtaWNlJyxcbiAgICBuZWJ1bGE6ICduZWJ1bGFlJyxcbiAgICBuZXVyb3NpczogJ25ldXJvc2VzJyxcbiAgICBudWNsZXVzOiAnbnVjbGVpJyxcbiAgICBvYXNpczogJ29hc2VzJyxcbiAgICBvY3RvcHVzOiAnb2N0b3BvZGVzJyxcbiAgICBvdnVtOiAnb3ZhJyxcbiAgICBveDogJ294ZW4nLFxuICAgIHBhcmFseXNpczogJ3BhcmFseXNlcycsXG4gICAgcGFyZW50aGVzaXM6ICdwYXJlbnRoZXNlcycsXG4gICAgcGVyc29uOiAncGVvcGxlJyxcbiAgICBwaGVub21lbm9uOiAncGhlbm9tZW5hJyxcbiAgICBwbGF0ZWF1OiAncGxhdGVhdXgnLFxuICAgIHBvdGF0bzogJ3BvdGF0b2VzJyxcbiAgICBxdWl6OiAncXVpenplcycsXG4gICAgcmFkaXVzOiAncmFkaWknLFxuICAgIHJlZmxleDogJ3JlZmxleGVzJyxcbiAgICAncnVubmVyLXVwJzogJ3J1bm5lcnMtdXAnLFxuICAgIHNjYW1wbzogJ3NjYW1waScsXG4gICAgc2NhcmY6ICdzY2FydmVzJyxcbiAgICBzY2lzc29yczogJ3NjaXNzb3JzJyxcbiAgICBzY3JhdGNoOiAnc2NyYXRjaGVzJyxcbiAgICBzZWxmOiAnc2VsdmVzJyxcbiAgICBzZXJpZXM6ICdzZXJpZXMnLFxuICAgIHNoZWFmOiAnc2hlYXZlcycsXG4gICAgc2hlZXA6ICdzaGVlcCcsXG4gICAgc2hlbGY6ICdzaGVsdmVzJyxcbiAgICAnc29uLWluLWxhdyc6ICdzb25zLWluLWxhdycsXG4gICAgc3BlY2llczogJ3NwZWNpZXMnLFxuICAgIHNwbGFzaDogJ3NwbGFzaGVzJyxcbiAgICBzdGltdWx1czogJ3N0aW11bGknLFxuICAgIHN0aXRjaDogJ3N0aXRjaGVzJyxcbiAgICBzdHJhdHVtOiAnc3RyYXRhJyxcbiAgICBzeWxsYWJ1czogJ3N5bGxhYmknLFxuICAgIHN5bXBvc2l1bTogJ3N5bXBvc2lhJyxcbiAgICBzeW5vcHNpczogJ3N5bm9wc2VzJyxcbiAgICBzeW50aGVzaXM6ICdzeW50aGVzZXMnLFxuICAgIHRhYmxlYXU6ICd0YWJsZWF1eCcsXG4gICAgdGF4OiAndGF4ZXMnLFxuICAgIHRoYXQ6ICd0aG9zZScsXG4gICAgdGhlc2lzOiAndGhlc2VzJyxcbiAgICB0aGllZjogJ3RoaWV2ZXMnLFxuICAgIHRoaXM6ICd0aGVzZScsXG4gICAgdG9tYXRvOiAndG9tYXRvZXMnLFxuICAgIHRvb3RoOiAndGVldGgnLFxuICAgIHRvcm5hZG86ICd0b3JuYWRvZXMnLFxuICAgIHRvcnBlZG86ICd0b3JwZWRvZXMnLFxuICAgIHZlcnRlYnJhOiAndmVydGVicmFlJyxcbiAgICB2ZXRvOiAndmV0b2VzJyxcbiAgICB2aXRhOiAndml0YWUnLFxuICAgIHZvbGNhbm86ICd2b2xjYW5vZXMnLFxuICAgIHdhbHR6OiAnd2FsdHplcycsXG4gICAgd2FzaDogJ3dhc2hlcycsXG4gICAgd2F0Y2g6ICd3YXRjaGVzJyxcbiAgICB3aGFyZjogJ3doYXJ2ZXMnLFxuICAgIHdpZmU6ICd3aXZlcycsXG4gICAgd29sZjogJ3dvbHZlcycsXG4gICAgd29tYW46ICd3b21lbicsXG4gICAgemVybzogJ3plcm9lcycsXG4gIH07XG5cbiAgdHJhbnNmb3JtKHNpbmd1bGFyRW50aXR5OiBzdHJpbmcsIHF1YW50aXR5OiBudW1iZXIgPSAwKTogc3RyaW5nIHtcbiAgICBpZiAoIXNpbmd1bGFyRW50aXR5IHx8IHNpbmd1bGFyRW50aXR5ID09PSAnJykge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cblxuICAgIGlmIChxdWFudGl0eSA9PT0gMSkge1xuICAgICAgcmV0dXJuIHNpbmd1bGFyRW50aXR5O1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBsYXN0V29yZCA9IHNpbmd1bGFyRW50aXR5LnRyaW0oKS5zcGxpdCgnICcpW3Npbmd1bGFyRW50aXR5LnRyaW0oKS5zcGxpdCgnICcpLmxlbmd0aCAtIDFdO1xuICAgICAgaWYgKHRoaXMuaXJyZWd1bGFyTWFwW2xhc3RXb3JkLnRvTG9jYWxlTG93ZXJDYXNlKCldKSB7XG4gICAgICAgIGlmIChsYXN0V29yZFswXSA9PT0gbGFzdFdvcmRbMF0udG9Mb2NhbGVVcHBlckNhc2UoKSkge1xuICAgICAgICAgIHJldHVybiBzaW5ndWxhckVudGl0eS5yZXBsYWNlKFxuICAgICAgICAgICAgbGFzdFdvcmQsXG4gICAgICAgICAgICB0aGlzLmlycmVndWxhck1hcFtsYXN0V29yZC50b0xvY2FsZUxvd2VyQ2FzZSgpXS5yZXBsYWNlKFxuICAgICAgICAgICAgICB0aGlzLmlycmVndWxhck1hcFtsYXN0V29yZC50b0xvY2FsZUxvd2VyQ2FzZSgpXVswXSxcbiAgICAgICAgICAgICAgdGhpcy5pcnJlZ3VsYXJNYXBbbGFzdFdvcmQudG9Mb2NhbGVMb3dlckNhc2UoKV1bMF0udG9Mb2NhbGVVcHBlckNhc2UoKVxuICAgICAgICAgICAgKVxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc2luZ3VsYXJFbnRpdHkucmVwbGFjZShsYXN0V29yZCwgdGhpcy5pcnJlZ3VsYXJNYXBbbGFzdFdvcmQudG9Mb2NhbGVMb3dlckNhc2UoKV0pO1xuICAgICAgfSBlbHNlIGlmIChsYXN0V29yZFtsYXN0V29yZC5sZW5ndGggLSAxXSA9PT0gJ3knKSB7XG4gICAgICAgIC8vIE5haXZlIGFwcHJvYWNoOlxuICAgICAgICAvLyBjb25zb25hbnQreSA9IHdvcmQgLSAneScgKydpZXMnXG4gICAgICAgIC8vIHZvd2VsK3kgPSB3b3JkICsgJ3MnXG5cbiAgICAgICAgcmV0dXJuIGlzVm93ZWwobGFzdFdvcmRbbGFzdFdvcmQubGVuZ3RoIC0gMl0pXG4gICAgICAgICAgPyBzaW5ndWxhckVudGl0eSArICdzJ1xuICAgICAgICAgIDogc2luZ3VsYXJFbnRpdHkucmVwbGFjZShsYXN0V29yZCwgbGFzdFdvcmQuc2xpY2UoMCwgLTEpICsgJ2llcycpO1xuICAgICAgfSBlbHNlIGlmIChsYXN0V29yZFtsYXN0V29yZC5sZW5ndGggLSAxXSA9PT0gJ3MnKSB7XG4gICAgICAgIHJldHVybiBzaW5ndWxhckVudGl0eSArICdlcyc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gc2luZ3VsYXJFbnRpdHkgKyAncyc7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iXX0=